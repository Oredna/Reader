@page
@using Newtonsoft.Json;
@model Reader.Pages.UnreadModel
@{
    ViewData["Title"] = Model.PageTitle;
}

@if (!Model.Items.Any())
{
    <p>You have no unread items</p>
}
else
{
    <form method="post" asp-page-handler="MarkAllAsRead" asp-route-ids="@JsonConvert.SerializeObject(Model.Items.Select(i => i.Id))"><button type="submit">Mark all as read</button></form>

    <ul>
        @foreach (var item in Model.Items)
        {
            <li>
                <a asp-page="SingleItem" asp-route-id="@item.Id">@item.Title</a><form method="post" asp-page-handler="MarkAsRead" asp-route-id="@item.Id"><button type="submit">Mark as read</button></form>
            </li>
        }
    </ul>
}